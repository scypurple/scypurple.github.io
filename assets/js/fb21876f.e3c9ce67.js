"use strict";(self.webpackChunkdocusaurus_first_app=self.webpackChunkdocusaurus_first_app||[]).push([[348],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return d}});var r=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{};var t,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,l=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=u(t),d=l,k=m["".concat(s,".").concat(d)]||m[d]||p[d]||a;return t?r.createElement(k,o(o({ref:n},c),{},{components:t})):r.createElement(k,o({ref:n},c))}));function d(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var a=t.length,o=new Array(a);o[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:l,o[1]=i;for(var u=2;u<a;u++)o[u]=t[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8949:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return p}});var r=t(7462),l=t(3366),a=(t(7294),t(3905)),o=["components"],i={slug:"JS",title:"YDK JS",authors:["scypurple"],tags:["\u624b\u5199\u9898","js"]},s=void 0,u={permalink:"/JS",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2022-06-11-JS.mdx",source:"@site/blog/2022-06-11-JS.mdx",title:"YDK JS",description:"\u5bf9\u8c61 \u6570\u7ec4",date:"2022-06-11T00:00:00.000Z",formattedDate:"June 11, 2022",tags:[{label:"\u624b\u5199\u9898",permalink:"/tags/\u624b\u5199\u9898"},{label:"js",permalink:"/tags/js"}],readingTime:39.775,truncated:!1,authors:[{name:"Lore",title:"Gamer",url:"https://www.scypurple.top",imageURL:"https://s2.loli.net/2022/06/11/rxBPTmAQ697fltv.jpg",key:"scypurple"}],frontMatter:{slug:"JS",title:"YDK JS",authors:["scypurple"],tags:["\u624b\u5199\u9898","js"]},prevItem:{title:"\u624b\u5199Ajax",permalink:"/Ajax"},nextItem:{title:"React - The JavaScript Framework",permalink:"/React"}},c={authorsImageUrls:[void 0]},p=[{value:"\u4f5c\u7528\u57df \u95ed\u5305 this",id:"\u4f5c\u7528\u57df-\u95ed\u5305-this",level:2},{value:"\u4f5c\u7528\u57df \u4e0e \u95ed\u5305",id:"\u4f5c\u7528\u57df-\u4e0e-\u95ed\u5305",level:3},{value:"this",id:"this",level:3},{value:"\u8bef\u89e3",id:"\u8bef\u89e3",level:4},{value:"this \u5230\u5e95\u662f\u4ec0\u4e48",id:"this-\u5230\u5e95\u662f\u4ec0\u4e48",level:4},{value:"\u7ed1\u5b9a\u89c4\u5219",id:"\u7ed1\u5b9a\u89c4\u5219",level:4},{value:"\u51fd\u6570",id:"\u51fd\u6570",level:2},{value:"\u51fd\u6570\u5f0f\u7f16\u7a0b",id:"\u51fd\u6570\u5f0f\u7f16\u7a0b",level:3},{value:"\u51fd\u6570\u8bb0\u5fc6",id:"\u51fd\u6570\u8bb0\u5fc6",level:4},{value:"\u7c7b",id:"\u7c7b",level:2},{value:"\u6a21\u5757",id:"\u6a21\u5757",level:2},{value:"\u6a21\u5757\u5316\u539f\u7406",id:"\u6a21\u5757\u5316\u539f\u7406",level:4},{value:"\u8de8\u57df\u901a\u4fe1",id:"\u8de8\u57df\u901a\u4fe1",level:2},{value:"\u540c\u6e90\u7b56\u7565\u7684\u6982\u5ff5\u548c\u5177\u4f53\u9650\u5236",id:"\u540c\u6e90\u7b56\u7565\u7684\u6982\u5ff5\u548c\u5177\u4f53\u9650\u5236",level:3},{value:"\u4e00\u4e9b\u51fd\u6570\u7684\u7528\u6cd5\u53ca\u539f\u7406",id:"\u4e00\u4e9b\u51fd\u6570\u7684\u7528\u6cd5\u53ca\u539f\u7406",level:2},{value:"instanceof",id:"instanceof",level:4},{value:"\u624b\u5199\u9898",id:"\u624b\u5199\u9898",level:2},{value:"\u6570\u636e\u7c7b\u578b\u5224\u65ad",id:"\u6570\u636e\u7c7b\u578b\u5224\u65ad",level:3},{value:"\u7ee7\u627f",id:"\u7ee7\u627f",level:3},{value:"\u5229\u7528 Object.create()\u5b9e\u73b0\u501f\u7528",id:"\u5229\u7528-objectcreate\u5b9e\u73b0\u501f\u7528",level:4},{value:"\u539f\u578b\u94fe\u7ee7\u627f",id:"\u539f\u578b\u94fe\u7ee7\u627f",level:4},{value:"\u501f\u7528\u6784\u9020\u51fd\u6570\u5b9e\u73b0\u7ee7\u627f",id:"\u501f\u7528\u6784\u9020\u51fd\u6570\u5b9e\u73b0\u7ee7\u627f",level:4},{value:"\u7ec4\u5408\u7ee7\u627f",id:"\u7ec4\u5408\u7ee7\u627f",level:4},{value:"\u5bc4\u751f\u7ec4\u5408\u7ee7\u627f",id:"\u5bc4\u751f\u7ec4\u5408\u7ee7\u627f",level:4},{value:"\u6570\u7ec4\u53bb\u91cd",id:"\u6570\u7ec4\u53bb\u91cd",level:3},{value:"\u6570\u7ec4\u6241\u5e73\u5316",id:"\u6570\u7ec4\u6241\u5e73\u5316",level:3},{value:"\u6df1\u6d45\u62f7\u8d1d",id:"\u6df1\u6d45\u62f7\u8d1d",level:2},{value:"\u4e8b\u4ef6\u603b\u7ebf\uff08\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\uff09",id:"\u4e8b\u4ef6\u603b\u7ebf\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f",level:2},{value:"\u89e3\u6790 URL \u53c2\u6570\u4e3a\u5bf9\u8c61",id:"\u89e3\u6790-url-\u53c2\u6570\u4e3a\u5bf9\u8c61",level:2},{value:"\u5b57\u7b26\u4e32\u6a21\u677f",id:"\u5b57\u7b26\u4e32\u6a21\u677f",level:2},{value:"\u56fe\u7247\u61d2\u52a0\u8f7d",id:"\u56fe\u7247\u61d2\u52a0\u8f7d",level:2},{value:"\u51fd\u6570\u9632\u6296",id:"\u51fd\u6570\u9632\u6296",level:2},{value:"\u51fd\u6570\u8282\u6d41",id:"\u51fd\u6570\u8282\u6d41",level:2},{value:"\u51fd\u6570\u67ef\u91cc\u5316",id:"\u51fd\u6570\u67ef\u91cc\u5316",level:2},{value:"\u504f\u51fd\u6570",id:"\u504f\u51fd\u6570",level:2},{value:"JSONP",id:"jsonp",level:2},{value:"AJAX",id:"ajax",level:2},{value:"\u5b9e\u73b0\u6570\u7ec4\u539f\u578b\u65b9\u6cd5",id:"\u5b9e\u73b0\u6570\u7ec4\u539f\u578b\u65b9\u6cd5",level:2},{value:"forEach",id:"foreach",level:3},{value:"map",id:"map",level:3},{value:"filter",id:"filter",level:3},{value:"some",id:"some",level:3},{value:"reduce",id:"reduce",level:3},{value:"\u5b9e\u73b0\u51fd\u6570\u539f\u578b\u65b9\u6cd5",id:"\u5b9e\u73b0\u51fd\u6570\u539f\u578b\u65b9\u6cd5",level:2},{value:"call",id:"call",level:3},{value:"apply",id:"apply",level:3},{value:"bind",id:"bind",level:3},{value:"\u5b9e\u73b0 new \u5173\u952e\u5b57",id:"\u5b9e\u73b0-new-\u5173\u952e\u5b57",level:2},{value:"\u5b9e\u73b0 instanceof \u5173\u952e\u5b57",id:"\u5b9e\u73b0-instanceof-\u5173\u952e\u5b57",level:2},{value:"\u5b9e\u73b0 Object.create",id:"\u5b9e\u73b0-objectcreate",level:2},{value:"\u5b9e\u73b0 Object.assign",id:"\u5b9e\u73b0-objectassign",level:2},{value:"\u5b9e\u73b0 JSON.stringify",id:"\u5b9e\u73b0-jsonstringify",level:2},{value:"\u5b9e\u73b0 JSON.parse",id:"\u5b9e\u73b0-jsonparse",level:2},{value:"eval \u5b9e\u73b0",id:"eval-\u5b9e\u73b0",level:3},{value:"new Function \u5b9e\u73b0",id:"new-function-\u5b9e\u73b0",level:3},{value:"\u5b9e\u73b0 Promise",id:"\u5b9e\u73b0-promise",level:2},{value:"Promise.resolve",id:"promiseresolve",level:3},{value:"Promise.reject",id:"promisereject",level:3},{value:"Promise.all",id:"promiseall",level:3},{value:"Promise.race",id:"promiserace",level:3},{value:"Promise.allSettled",id:"promiseallsettled",level:3},{value:"Promise.any",id:"promiseany",level:3}],m={toc:p};function d(e){var n=e.components,t=(0,l.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5bf9\u8c61 \u27a1\ufe0f \u6570\u7ec4")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"why : \u5bf9\u8c61\u7f3a\u5c11\u6570\u7ec4\u5b58\u5728\u7684\u8bb8\u591a\u65b9\u6cd5\uff0c\u4f8b\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"map")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"filter")," \u7b49\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"how\uff1a\u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Object.entries"),"\uff0c\u7136\u540e\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Object.fromEntries"),"\uff1a"),(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"Object.entries(obj)")," \u4ece ",(0,a.kt)("inlineCode",{parentName:"li"},"obj")," \u83b7\u53d6\u7531\u952e/\u503c\u5bf9\u7ec4\u6210\u7684\u6570\u7ec4\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u5bf9\u8be5\u6570\u7ec4\u4f7f\u7528\u6570\u7ec4\u65b9\u6cd5\uff0c\u4f8b\u5982 ",(0,a.kt)("inlineCode",{parentName:"li"},"map"),"\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u5bf9\u7ed3\u679c\u6570\u7ec4\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"Object.fromEntries(array)")," \u65b9\u6cd5\uff0c\u5c06\u7ed3\u679c\u8f6c\u56de\u6210\u5bf9\u8c61\u3002"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"what\uff1a\u4f8b\u5982\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u5e26\u6709\u4ef7\u683c\u7684\u5bf9\u8c61\uff0c\u5e76\u60f3\u5c06\u5b83\u4eec\u52a0\u500d\uff1a"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let prices = {\n  banana: 1,\n  orange: 2,\n  meat: 4,\n};\n\nlet doublePrices = Object.fromEntries(\n  // \u8f6c\u6362\u4e3a\u6570\u7ec4\uff0c\u4e4b\u540e\u4f7f\u7528 map \u65b9\u6cd5\uff0c\u7136\u540e\u901a\u8fc7 fromEntries \u518d\u8f6c\u56de\u5230\u5bf9\u8c61\n  Object.entries(prices).map(([key, value]) => [key, value * 2])\n);\n\nalert(doublePrices.meat); // 8\n")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5b57\u7b26\u4e32 \u27a1\ufe0f \u6570\u7ec4")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"let str = \"lore\";\nalert([...str]);//spread\u8bed\u6cd5\u53ea\u9002\u7528\u4e8e\u53ef\u8fed\u4ee3\u5bf9\u8c61\nalert(str.split(''));//\u5b57\u7b26\u4e32\nalert(Array.from(str));//\u9002\u7528\u4e8e\u7c7b\u6570\u7ec4\u5bf9\u8c61\u4e5f\u9002\u7528\u4e8e\u53ef\u8fed\u4ee3\u5bf9\u8c61\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"js \u65b9\u6cd5\u4e0d\u4f1a\u4fee\u6539\u539f\u59cb\u7c7b\u578b\uff0c\u53ea\u80fd\u4fee\u6539\u5bf9\u8c61")),(0,a.kt)("h2",{id:"\u4f5c\u7528\u57df-\u95ed\u5305-this"},"\u4f5c\u7528\u57df \u95ed\u5305 this"),(0,a.kt)("h3",{id:"\u4f5c\u7528\u57df-\u4e0e-\u95ed\u5305"},"\u4f5c\u7528\u57df \u4e0e \u95ed\u5305"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"js \u662f\u4f5c\u7528\u57df\u662f\u8bcd\u6cd5\u4f5c\u7528\u57df")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function foo() {\n  console.log(a); // \u662f\u8bcd\u6cd5\u4f5c\u7528\u57df\u6240\u4ee5\u8f93\u51fa 2 \u800c\u4e0d\u662f 3\n}\n\nfunction bar() {\n  let a = 3;\n}\n\nlet a = 2;\nbar(); \n")),(0,a.kt)("h3",{id:"this"},"this"),(0,a.kt)("h4",{id:"\u8bef\u89e3"},"\u8bef\u89e3"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"this"),"\u548c\u8bcd\u6cd5\u4f5c\u7528\u57df\u7684\u67e5\u627e\u6df7\u5408\u4f7f\u7528\u662f\u65e0\u6cd5\u5b9e\u73b0\u7684\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"this"),"\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\u90fd\u4e0d\u6307\u5411\u51fd\u6570\u7684\u8bcd\u6cd5\u4f5c\u7528\u57df\u3002\u4f5c\u7528\u57df\u65e0\u6cd5\u901a\u8fc7 js \u4ee3\u7801\u8bbf\u95ee\uff0c\u5b83\u5b58\u5728\u57df js \u5f15\u64ce\u5185\u90e8"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"this"),"\u7684\u7ed1\u5b9a\u548c\u51fd\u6570\u58f0\u660e\u7684\u4f4d\u7f6e\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u53ea\u53d6\u51b3\u4e0e\u51fd\u6570\u7684\u8c03\u7528\u65b9\u5f0f")),(0,a.kt)("h4",{id:"this-\u5230\u5e95\u662f\u4ec0\u4e48"},"this \u5230\u5e95\u662f\u4ec0\u4e48"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5f53\u4e00\u4e2a\u51fd\u6570\u88ab\u8c03\u7528\u65f6\uff0c\u4f1a\u521b\u5efa\u4e00\u4e2a\u6d3b\u52a8\u8bb0\u5f55\uff08\u6709\u65f6\u5019\u4e5f\u53eb\u6267\u884c\u4e0a\u4e0b\u6587\uff09",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u8fd9\u4e2a\u8bb0\u5f55\u4f1a\u5305\u542b\u51fd\u6570\u5728\u54ea\u91cc\u88ab\u8c03\u7528\uff08\u8c03\u7528\u6808\uff09"),(0,a.kt)("li",{parentName:"ul"},"\u51fd\u6570\u7684\u8c03\u7528\u65b9\u5f0f"),(0,a.kt)("li",{parentName:"ul"},"\u4f20\u5165\u7684\u53c2\u6570\u7b49\u4fe1\u606f"),(0,a.kt)("li",{parentName:"ul"},"this\u5c31\u662f\u8fd9\u4e2a\u8bb0\u5f55\u7684\u4e00\u4e2a\u5c5e\u6027\uff0c\u4f1a\u5728\u51fd\u6570\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u7528\u5230")))),(0,a.kt)("h4",{id:"\u7ed1\u5b9a\u89c4\u5219"},"\u7ed1\u5b9a\u89c4\u5219"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u7ed1\u5b9a\uff1a\u72ec\u7acb\u51fd\u6570\u8c03\u7528\uff0c\u975e\u4e25\u683c\u6a21\u5f0f \u5168\u5c40\u5bf9\u8c61\uff0c\u4e25\u683c\u6a21\u5f0f undefined"),(0,a.kt)("li",{parentName:"ul"},"\u9690\u5f0f\u7ed1\u5b9a\uff1a\u8c03\u7528\u4f4d\u7f6e\u662f\u5426\u6709\u4e0a\u4e0b\u6587\u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ul"},"\u663e\u793a\u7ed1\u5b9a\uff1acall apply bind"),(0,a.kt)("li",{parentName:"ul"},"new \u7ed1\u5b9a\uff1a\u5728 JS \u4e2d\u6784\u9020\u51fd\u6570\u53ea\u662f\u4e00\u4e9b\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"new"),"\u64cd\u4f5c\u7b26\u65f6\u88ab\u8c03\u7528\u7684\u51fd\u6570")),(0,a.kt)("h2",{id:"\u51fd\u6570"},"\u51fd\u6570"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u53ea\u6709\u51fd\u6570\u6709",(0,a.kt)("inlineCode",{parentName:"li"},"prototype"),"\u5c5e\u6027 ")),(0,a.kt)("h3",{id:"\u51fd\u6570\u5f0f\u7f16\u7a0b"},"\u51fd\u6570\u5f0f\u7f16\u7a0b"),(0,a.kt)("h4",{id:"\u51fd\u6570\u8bb0\u5fc6"},"\u51fd\u6570\u8bb0\u5fc6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'const memorize = f => {\n    const cache = new Map();\n\n    return function(...args) {\n        let key = args.length + args.join(",");\n        if (cache.has(key)) {\n            return cache.get(key);\n        } else {\n            let result = f.apply(this, args);\n            cache.set(key, result);\n            return result;\n        }\n    }\n}\n\nconst factorial = n => (n === 1) ? 1 : n * factorial(n-1);\nconst f  = memorize(function(n){\n    return n === 1 ? 1 : n * f(n-1);\n}) \n// 120\nconsole.log(memorize(factorial)(5));\nconsole.log(factorial(5));\nconsole.log(f(5));\n')),(0,a.kt)("h2",{id:"\u7c7b"},"\u7c7b"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u80fd\u7ec4\u5408\u5c31\u4e0d\u7ee7\u627f\uff08\u81ea\u5df1\u521b\u5efa\u7c7b\uff0c\u65b9\u6cd5\u53ef\u4ee5\u59d4\u6258\u7ed9\u5176\u4ed6\u7c7b\u73b0\u6709\u7684\u65b9\u6cd5\uff09")),(0,a.kt)("h2",{id:"\u6a21\u5757"},"\u6a21\u5757"),(0,a.kt)("h4",{id:"\u6a21\u5757\u5316\u539f\u7406"},"\u6a21\u5757\u5316\u539f\u7406"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5229\u7528\u51fd\u6570\u95ed\u5305\u5c06\u8981\u66b4\u9732\u7684\u503c\u4f5c\u4e3a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u8d4b\u7ed9\u53d8\u91cf")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const people = (function() {\n    let name = 'lore';\n    const sayName = () => console.log(name);\n    return { sayName };\n})()\n\nconsole.log(people.sayName());\n")),(0,a.kt)("h2",{id:"\u8de8\u57df\u901a\u4fe1"},"\u8de8\u57df\u901a\u4fe1"),(0,a.kt)("h3",{id:"\u540c\u6e90\u7b56\u7565\u7684\u6982\u5ff5\u548c\u5177\u4f53\u9650\u5236"},"\u540c\u6e90\u7b56\u7565\u7684\u6982\u5ff5\u548c\u5177\u4f53\u9650\u5236"),(0,a.kt)("h2",{id:"\u4e00\u4e9b\u51fd\u6570\u7684\u7528\u6cd5\u53ca\u539f\u7406"},"\u4e00\u4e9b\u51fd\u6570\u7684\u7528\u6cd5\u53ca\u539f\u7406"),(0,a.kt)("h4",{id:"instanceof"},"instanceof"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u53f3\u8fb9\u53d8\u91cf\u7684",(0,a.kt)("inlineCode",{parentName:"li"},"prototype"),"\u5728\u5de6\u8fb9\u53d8\u91cf\u7684",(0,a.kt)("inlineCode",{parentName:"li"},"_proto_"),"\u539f\u578b\u94fe\u4e0a\u5373\u53ef")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"const myInstanceof = (left, right) => {\n    while(1) {\n        if (left._proto_ === null) return false;\n        if (left._proto_ === right.prototype) return true;\n        left = left._proto_;\n    }\n}\n")),(0,a.kt)("h2",{id:"\u624b\u5199\u9898"},"\u624b\u5199\u9898"),(0,a.kt)("h3",{id:"\u6570\u636e\u7c7b\u578b\u5224\u65ad"},"\u6570\u636e\u7c7b\u578b\u5224\u65ad"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const typeOf = (obj) => '[' + Object.prototype.toString.call(obj).split(\" \")[1];\n")),(0,a.kt)("h3",{id:"\u7ee7\u627f"},"\u7ee7\u627f"),(0,a.kt)("h4",{id:"\u5229\u7528-objectcreate\u5b9e\u73b0\u501f\u7528"},"\u5229\u7528 Object.create()\u5b9e\u73b0\u501f\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const human = {\n    species: \"human\",\n    saySpecies() {\n        console.log(this.species);\n    },\n    sayName() {\n        console.log(this.name);\n    }\n};\n\nconst player = Object.create(human,{\n      species: {value: \"Gamer\" },\n      playGame:{value:function(){console.log(this.game)}}\n})\n// or do this\n/*\nconst player = Object.create(human);\nplayer.spcies = 'Gamer';\nplayer.playGame = function(){console.log(this.game)};\n*/\nconst lore = Object.create(player,\n{\n    name:{value: 'lore' },\n    game:{value:'MONSTER HUNTER'}\n})\n\nconsole.log(lore.playGame());\n\n\n// \u4e5f\u53ef\u4ee5\u521b\u5efacreate\u65b9\u6cd5\nconst human = {\n    species: \"human\",\n    create: function(values) {\n        const instance = Object.create(this);\n        Object.keys(values).forEach(key => instance[key] = values[key]);\n        return instance;\n    },\n    saySpecies() {\n        console.log(this.species);\n    },\n    sayName() {\n        console.log(this.name);\n    }\n};\n\nconst player = human.create({\n    species:'player',\n    playGame() {\n        console.log(`I'm playing ${this.game} now !`);\n    }\n})\n\nconst lore = player.create({\n    name:'lore',\n    game:'MONSTER HUNTER'\n})\n\nconsole.log(lore.playGame());\n")),(0,a.kt)("h4",{id:"\u539f\u578b\u94fe\u7ee7\u627f"},"\u539f\u578b\u94fe\u7ee7\u627f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function Animal() {\n    this.colors = ['black', 'white']\n}\nAnimal.prototype.getColor = function() {\n    return this.colors\n}\nfunction Dog() {}\nDog.prototype =  new Animal()\n\nlet dog1 = new Dog()\ndog1.colors.push('brown')\nlet dog2 = new Dog()\nconsole.log(dog2.colors)  // ['black', 'white', 'brown']\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u539f\u578b\u94fe\u7ee7\u627f\u5b58\u5728\u7684\u95ee\u9898\uff1a")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u95ee\u98981\uff1a\u539f\u578b\u4e2d\u5305\u542b\u7684\u5f15\u7528\u7c7b\u578b\u5c5e\u6027\u5c06\u88ab\u6240\u6709\u5b9e\u4f8b\u5171\u4eab\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u95ee\u98982\uff1a\u5b50\u7c7b\u5728\u5b9e\u4f8b\u5316\u7684\u65f6\u5019\u4e0d\u80fd\u7ed9\u7236\u7c7b\u6784\u9020\u51fd\u6570\u4f20\u53c2\uff1b")),(0,a.kt)("h4",{id:"\u501f\u7528\u6784\u9020\u51fd\u6570\u5b9e\u73b0\u7ee7\u627f"},"\u501f\u7528\u6784\u9020\u51fd\u6570\u5b9e\u73b0\u7ee7\u627f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function Animal(name) {\n  this.name = name;\n  this.getName = function () {\n    return this.name;\n  }\n}\n\nfunction Dog(name) {\n  Animal.call(this, name);\n}\n\nDog.prototype = new Animal();\n")),(0,a.kt)("p",null,"\u501f\u7528\u6784\u9020\u51fd\u6570\u5b9e\u73b0\u7ee7\u627f\u89e3\u51b3\u4e86\u539f\u578b\u94fe\u7ee7\u627f\u7684 2 \u4e2a\u95ee\u9898\uff1a\u5f15\u7528\u7c7b\u578b\u5171\u4eab\u95ee\u9898\u4ee5\u53ca\u4f20\u53c2\u95ee\u9898\u3002\u4f46\u662f\u7531\u4e8e\u65b9\u6cd5\u5fc5\u987b\u5b9a\u4e49\u5728\u6784\u9020\u51fd\u6570\u4e2d\uff0c\u6240\u4ee5\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u521b\u5efa\u5b50\u7c7b\u5b9e\u4f8b\u90fd\u4f1a\u521b\u5efa\u4e00\u904d\u65b9\u6cd5\u3002"),(0,a.kt)("h4",{id:"\u7ec4\u5408\u7ee7\u627f"},"\u7ec4\u5408\u7ee7\u627f"),(0,a.kt)("p",null,"\u7ec4\u5408\u7ee7\u627f\u7ed3\u5408\u4e86\u539f\u578b\u94fe\u548c\u76d7\u7528\u6784\u9020\u51fd\u6570\uff0c\u5c06\u4e24\u8005\u7684\u4f18\u70b9\u96c6\u4e2d\u4e86\u8d77\u6765\u3002\u57fa\u672c\u7684\u601d\u8def\u662f\u4f7f\u7528\u539f\u578b\u94fe\u7ee7\u627f\u539f\u578b\u4e0a\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u800c\u901a\u8fc7\u76d7\u7528\u6784\u9020\u51fd\u6570\u7ee7\u627f\u5b9e\u4f8b\u5c5e\u6027\u3002\u8fd9\u6837\u65e2\u53ef\u4ee5\u628a\u65b9\u6cd5\u5b9a\u4e49\u5728\u539f\u578b\u4e0a\u4ee5\u5b9e\u73b0\u91cd\u7528\uff0c\u53c8\u53ef\u4ee5\u8ba9\u6bcf\u4e2a\u5b9e\u4f8b\u90fd\u6709\u81ea\u5df1\u7684\u5c5e\u6027\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function Animal(name) {\n    this.name = name\n    this.colors = ['black', 'white']\n}\nAnimal.prototype.getName = function() {\n    return this.name\n}\nfunction Dog(name, age) {\n    Animal.call(this, name)\n    this.age = age\n}\nDog.prototype =  new Animal()\nDog.prototype.constructor = Dog\n\nlet dog1 = new Dog('\u5976\u6614', 2)\ndog1.colors.push('brown')\nlet dog2 = new Dog('\u54c8\u8d64', 1)\nconsole.log(dog2) \n// { name: \"\u54c8\u8d64\", colors: [\"black\", \"white\"], age: 1 }\n")),(0,a.kt)("h4",{id:"\u5bc4\u751f\u7ec4\u5408\u7ee7\u627f"},"\u5bc4\u751f\u7ec4\u5408\u7ee7\u627f"),(0,a.kt)("p",null,"\u7ec4\u5408\u7ee7\u627f\u5df2\u7ecf\u76f8\u5bf9\u5b8c\u5584\u4e86\uff0c\u4f46\u8fd8\u662f\u5b58\u5728\u95ee\u9898\uff0c\u5b83\u7684\u95ee\u9898\u5c31\u662f\u8c03\u7528\u4e86 2 \u6b21\u7236\u7c7b\u6784\u9020\u51fd\u6570\uff0c\u7b2c\u4e00\u6b21\u662f\u5728 new Animal()\uff0c\u7b2c\u4e8c\u6b21\u662f\u5728 Animal.call() \u8fd9\u91cc\u3002"),(0,a.kt)("p",null,"\u6240\u4ee5\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u4e0d\u76f4\u63a5\u8c03\u7528\u7236\u7c7b\u6784\u9020\u51fd\u6570\u7ed9\u5b50\u7c7b\u539f\u578b\u8d4b\u503c\uff0c\u800c\u662f\u901a\u8fc7\u521b\u5efa\u7a7a\u51fd\u6570 F \u83b7\u53d6\u7236\u7c7b\u539f\u578b\u7684\u526f\u672c\u3002"),(0,a.kt)("p",null,"\u5bc4\u751f\u5f0f\u7ec4\u5408\u7ee7\u627f\u5199\u6cd5\u4e0a\u548c\u7ec4\u5408\u7ee7\u627f\u57fa\u672c\u7c7b\u4f3c\uff0c\u533a\u522b\u662f\u5982\u4e0b\u8fd9\u91cc\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"- Dog.prototype =  new Animal()\n- Dog.prototype.constructor = Dog\n\n+ function F() {}\n+ F.prototype = Animal.prototype\n+ let f = new F()\n+ f.constructor = Dog\n+ Dog.prototype = f\n//\u7a0d\u5fae\u5c01\u88c5\u4e0b\u4e0a\u9762\u6dfb\u52a0\u7684\u4ee3\u7801\u540e\uff1a\nfunction object(o) {\n    function F() {}\n    F.prototype = o\n    return new F()\n}\nfunction inheritPrototype(child, parent) {\n    let prototype = object(parent.prototype)\n    prototype.constructor = child\n    child.prototype = prototype\n}\ninheritPrototype(Dog, Animal)\n//\u5982\u679c\u4f60\u5acc\u5f03\u4e0a\u9762\u7684\u4ee3\u7801\u592a\u591a\u4e86\uff0c\u8fd8\u53ef\u4ee5\u57fa\u4e8e\u7ec4\u5408\u7ee7\u627f\u7684\u4ee3\u7801\u6539\u6210\u6700\u7b80\u5355\u7684\u5bc4\u751f\u5f0f\u7ec4\u5408\u7ee7\u627f\uff1a\n- Dog.prototype =  new Animal()\n- Dog.prototype.constructor = Dog\n\n+ Dog.prototype =  Object.create(Animal.prototype)\n+ Dog.prototype.constructor = Dog\n\n// \u4e3a\u4ec0\u4e48\u8981\u521b\u9020\u4e00\u4e2a\u7a7a\u51fd\u6570 \u4e0d\u80fd\u76f4\u63a5\uff1a\n+ Dog.prototype = Animal.prototype // x\n+ Dog.prototype.constructor = Dog\n// \u56e0\u4e3a x \u884c\u4ee3\u7801\u8ba9 \u5de6\u53f3\u4e24\u4fa7\u6307\u5411\u540c\u4e00\u4e2a\u5f15\u7528\uff0c \u800c\u4e0b\u4e00\u884c\u4f7f Animal.prototype.constructor \u88ab\u6539\u5199\n")),(0,a.kt)("h3",{id:"\u6570\u7ec4\u53bb\u91cd"},"\u6570\u7ec4\u53bb\u91cd"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'// includes\nconst unique = arr => {\n  if (!Array.isArray(arr)) {\n    return new Error("type error");\n  }\n  const res = [];\n  for (let elem of arr) {\n    if (!res.includes(elem)) {\n      res.push(elem);\n    }\n  }\n  return res;\n}\n\n// indexOf\nconst unique = arr => arr.filter((e, i) => arr.indexOf(e) === i);\n\n// set\nconst unique = arr => [...new Set(arr)];\n')),(0,a.kt)("h3",{id:"\u6570\u7ec4\u6241\u5e73\u5316"},"\u6570\u7ec4\u6241\u5e73\u5316"),(0,a.kt)("p",null,"\u6570\u7ec4\u6241\u5e73\u5316\u5c31\u662f\u5c06 [1, [2, ","[3]","]] \u8fd9\u79cd\u591a\u5c42\u7684\u6570\u7ec4\u62cd\u5e73\u6210\u4e00\u5c42 ","[1, 2, 3]","\u3002\u4f7f\u7528 Array.prototype.flat \u53ef\u4ee5\u76f4\u63a5\u5c06\u591a\u5c42\u6570\u7ec4\u62cd\u5e73\u6210\u4e00\u5c42\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"[1, [2, [3]]].flat(2)  // [1, 2, 3]\n")),(0,a.kt)("p",null,"\u73b0\u5728\u5c31\u662f\u8981\u5b9e\u73b0 flat \u8fd9\u79cd\u6548\u679c\u3002"),(0,a.kt)("p",null,"ES5 \u5b9e\u73b0\uff1a\u9012\u5f52\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function flatten(arr) {\n    var result = [];\n    for (var i = 0, len = arr.length; i < len; i++) {\n        if (Array.isArray(arr[i])) {\n            result = result.concat(flatten(arr[i]))\n        } else {\n            result.push(arr[i])\n        }\n    }\n    return result;\n}\n")),(0,a.kt)("p",null,"ES6 \u5b9e\u73b0\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function flatten(arr) {\n    while (arr.some(item => Array.isArray(item))) {\n        arr = [].concat(...arr);\n    }\n    return arr;\n}\n")),(0,a.kt)("h2",{id:"\u6df1\u6d45\u62f7\u8d1d"},"\u6df1\u6d45\u62f7\u8d1d"),(0,a.kt)("p",null,"\u6d45\u62f7\u8d1d\uff1a\u53ea\u8003\u8651\u5bf9\u8c61\u7c7b\u578b\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function shallowCopy(obj) {\n    if (typeof obj !== 'object') return\n    \n    let newObj = obj instanceof Array ? [] : {}\n    for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            newObj[key] = obj[key]\n        }\n    }\n    return newObj\n}\n")),(0,a.kt)("p",null,"\u7b80\u5355\u7248\u6df1\u62f7\u8d1d\uff1a\u53ea\u8003\u8651\u666e\u901a\u5bf9\u8c61\u5c5e\u6027\uff0c\u4e0d\u8003\u8651\u5185\u7f6e\u5bf9\u8c61\u548c\u51fd\u6570\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function deepClone(obj) {\n    if (typeof obj !== 'object') return;\n    var newObj = obj instanceof Array ? [] : {};\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            newObj[key] = typeof obj[key] === 'object' ? deepClone(obj[key]) : obj[key];\n        }\n    }\n    return newObj;\n}\n\n// my type\nconst deepClone = obj => {\n  if (typeof obj !== 'object' || obj === null) return obj;\n  const newObj = obj instanceof Array ? [] : {};\n  for (const [key, value] of Object.entries(obj)) {\n    newObj[key] = typeof value === 'object' ? deepClone(value) : value;\n  }\n  return newObj;\n}\n")),(0,a.kt)("p",null,"\u590d\u6742\u7248\u6df1\u514b\u9686\uff1a\u57fa\u4e8e\u7b80\u5355\u7248\u7684\u57fa\u7840\u4e0a\uff0c\u8fd8\u8003\u8651\u4e86\u5185\u7f6e\u5bf9\u8c61\u6bd4\u5982 Date\u3001RegExp \u7b49\u5bf9\u8c61\u548c\u51fd\u6570\u4ee5\u53ca\u89e3\u51b3\u4e86\u5faa\u73af\u5f15\u7528\u7684\u95ee\u9898\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const isObject = (target) => (typeof target === "object" || typeof target === "function") && target !== null;\n\nfunction deepClone(target, map = new WeakMap()) {\n    if (map.get(target)) {\n        return target;\n    }\n    // \u83b7\u53d6\u5f53\u524d\u503c\u7684\u6784\u9020\u51fd\u6570\uff1a\u83b7\u53d6\u5b83\u7684\u7c7b\u578b\n    let constructor = target.constructor;\n    // \u68c0\u6d4b\u5f53\u524d\u5bf9\u8c61target\u662f\u5426\u4e0e\u6b63\u5219\u3001\u65e5\u671f\u683c\u5f0f\u5bf9\u8c61\u5339\u914d\n    if (/^(RegExp|Date)$/i.test(constructor.name)) {\n        // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7279\u6b8a\u5bf9\u8c61(\u6b63\u5219\u7c7b/\u65e5\u671f\u7c7b)\u7684\u5b9e\u4f8b\n        return new constructor(target);  \n    }\n    if (isObject(target)) {\n        map.set(target, true);  // \u4e3a\u5faa\u73af\u5f15\u7528\u7684\u5bf9\u8c61\u505a\u6807\u8bb0\n        const cloneTarget = Array.isArray(target) ? [] : {};\n        for (let prop in target) {\n            if (target.hasOwnProperty(prop)) {\n                cloneTarget[prop] = deepClone(target[prop], map);\n            }\n        }\n        return cloneTarget;\n    } else {\n        return target;\n    }\n}\n')),(0,a.kt)("h2",{id:"\u4e8b\u4ef6\u603b\u7ebf\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f"},"\u4e8b\u4ef6\u603b\u7ebf\uff08\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\uff09"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class EventEmitter {\n    constructor() {\n        this.cache = {}\n    }\n    on(name, fn) {\n        if (this.cache[name]) {\n            this.cache[name].push(fn)\n        } else {\n            this.cache[name] = [fn]\n        }\n    }\n    off(name, fn) {\n        let tasks = this.cache[name]\n        if (tasks) {\n            const index = tasks.findIndex(f => f === fn || f.callback === fn)\n            if (index >= 0) {\n                tasks.splice(index, 1)\n            }\n        }\n    }\n    emit(name, once = false, ...args) {\n        if (this.cache[name]) {\n            // \u521b\u5efa\u526f\u672c\uff0c\u5982\u679c\u56de\u8c03\u51fd\u6570\u5185\u7ee7\u7eed\u6ce8\u518c\u76f8\u540c\u4e8b\u4ef6\uff0c\u4f1a\u9020\u6210\u6b7b\u5faa\u73af\n            let tasks = this.cache[name].slice()\n            for (let fn of tasks) {\n                fn(...args)\n            }\n            if (once) {\n                delete this.cache[name]\n            }\n        }\n    }\n}\n\n// \u6d4b\u8bd5\nlet eventBus = new EventEmitter()\nlet fn1 = function(name, age) {\n    console.log(`${name} ${age}`)\n}\nlet fn2 = function(name, age) {\n    console.log(`hello, ${name} ${age}`)\n}\neventBus.on('aaa', fn1)\neventBus.on('aaa', fn2)\neventBus.emit('aaa', false, '\u5e03\u5170', 12)\n// '\u5e03\u5170 12'\n// 'hello, \u5e03\u5170 12'\n")),(0,a.kt)("h2",{id:"\u89e3\u6790-url-\u53c2\u6570\u4e3a\u5bf9\u8c61"},"\u89e3\u6790 URL \u53c2\u6570\u4e3a\u5bf9\u8c61"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function parseParam(url) {\n    const paramsStr = /.+\\?(.+)$/.exec(url)[1]; // \u5c06 ? \u540e\u9762\u7684\u5b57\u7b26\u4e32\u53d6\u51fa\u6765\n    const paramsArr = paramsStr.split('&'); // \u5c06\u5b57\u7b26\u4e32\u4ee5 & \u5206\u5272\u540e\u5b58\u5230\u6570\u7ec4\u4e2d\n    let paramsObj = {};\n    // \u5c06 params \u5b58\u5230\u5bf9\u8c61\u4e2d\n    paramsArr.forEach(param => {\n        if (/=/.test(param)) { // \u5904\u7406\u6709 value \u7684\u53c2\u6570\n            let [key, val] = param.split('='); // \u5206\u5272 key \u548c value\n            val = decodeURIComponent(val); // \u89e3\u7801\n            val = /^\\d+$/.test(val) ? parseFloat(val) : val; // \u5224\u65ad\u662f\u5426\u8f6c\u4e3a\u6570\u5b57\n    \n            if (paramsObj.hasOwnProperty(key)) { // \u5982\u679c\u5bf9\u8c61\u6709 key\uff0c\u5219\u6dfb\u52a0\u4e00\u4e2a\u503c\n                paramsObj[key] = [].concat(paramsObj[key], val);\n            } else { // \u5982\u679c\u5bf9\u8c61\u6ca1\u6709\u8fd9\u4e2a key\uff0c\u521b\u5efa key \u5e76\u8bbe\u7f6e\u503c\n                paramsObj[key] = val;\n            }\n        } else { // \u5904\u7406\u6ca1\u6709 value \u7684\u53c2\u6570\n            paramsObj[param] = true;\n        }\n    })\n    \n    return paramsObj;\n}\n")),(0,a.kt)("h2",{id:"\u5b57\u7b26\u4e32\u6a21\u677f"},"\u5b57\u7b26\u4e32\u6a21\u677f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function render(template, data) {\n    const reg = /\\{\\{(\\w+)\\}\\}/; // \u6a21\u677f\u5b57\u7b26\u4e32\u6b63\u5219\n    if (reg.test(template)) { // \u5224\u65ad\u6a21\u677f\u91cc\u662f\u5426\u6709\u6a21\u677f\u5b57\u7b26\u4e32\n        const name = reg.exec(template)[1]; // \u67e5\u627e\u5f53\u524d\u6a21\u677f\u91cc\u7b2c\u4e00\u4e2a\u6a21\u677f\u5b57\u7b26\u4e32\u7684\u5b57\u6bb5\n        template = template.replace(reg, data[name]); // \u5c06\u7b2c\u4e00\u4e2a\u6a21\u677f\u5b57\u7b26\u4e32\u6e32\u67d3\n        return render(template, data); // \u9012\u5f52\u7684\u6e32\u67d3\u5e76\u8fd4\u56de\u6e32\u67d3\u540e\u7684\u7ed3\u6784\n    }\n    return template; // \u5982\u679c\u6a21\u677f\u6ca1\u6709\u6a21\u677f\u5b57\u7b26\u4e32\u76f4\u63a5\u8fd4\u56de\n}\n")),(0,a.kt)("p",null,"\u6d4b\u8bd5\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let template = '\u6211\u662f{{name}}\uff0c\u5e74\u9f84{{age}}\uff0c\u6027\u522b{{sex}}';\nlet person = {\n    name: '\u5e03\u5170',\n    age: 12\n}\nrender(template, person); // \u6211\u662f\u5e03\u5170\uff0c\u5e74\u9f8412\uff0c\u6027\u522bundefined\n")),(0,a.kt)("h2",{id:"\u56fe\u7247\u61d2\u52a0\u8f7d"},"\u56fe\u7247\u61d2\u52a0\u8f7d"),(0,a.kt)("p",null,"\u4e0e\u666e\u901a\u7684\u56fe\u7247\u61d2\u52a0\u8f7d\u4e0d\u540c\uff0c\u5982\u4e0b\u8fd9\u4e2a\u591a\u505a\u4e86 2 \u4e2a\u7cbe\u5fc3\u5904\u7406\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u56fe\u7247\u5168\u90e8\u52a0\u8f7d\u5b8c\u6210\u540e\u79fb\u9664\u4e8b\u4ef6\u76d1\u542c\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u52a0\u8f7d\u5b8c\u7684\u56fe\u7247\uff0c\u4ece imgList \u79fb\u9664\uff1b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let imgList = [...document.querySelectorAll('img')]\nlet length = imgList.length\n\nconst imgLazyLoad = function() {\n    let count = 0\n    return (function() {\n        let deleteIndexList = []\n        imgList.forEach((img, index) => {\n            let rect = img.getBoundingClientRect()\n            if (rect.top < window.innerHeight) {\n                img.src = img.dataset.src\n                deleteIndexList.push(index)\n                count++\n                if (count === length) {\n                    document.removeEventListener('scroll', imgLazyLoad)\n                }\n            }\n        })\n        imgList = imgList.filter((img, index) => !deleteIndexList.includes(index))\n    })()\n}\n\n// \u8fd9\u91cc\u6700\u597d\u52a0\u4e0a\u9632\u6296\u5904\u7406\ndocument.addEventListener('scroll', imgLazyLoad)\n")),(0,a.kt)("p",null,"\u53c2\u8003\uff1a",(0,a.kt)("strong",{parentName:"p"},"\u56fe\u7247\u61d2\u52a0\u8f7d"),"[1]"),(0,a.kt)("h2",{id:"\u51fd\u6570\u9632\u6296"},"\u51fd\u6570\u9632\u6296"),(0,a.kt)("p",null,"\u89e6\u53d1\u9ad8\u9891\u4e8b\u4ef6 N \u79d2\u540e\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u5982\u679c N \u79d2\u5185\u4e8b\u4ef6\u518d\u6b21\u89e6\u53d1\uff0c\u5219\u4f1a\u91cd\u65b0\u8ba1\u65f6\u3002"),(0,a.kt)("p",null,"\u7b80\u5355\u7248\uff1a\u51fd\u6570\u5185\u90e8\u652f\u6301\u4f7f\u7528 this \u548c event \u5bf9\u8c61\uff1b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function debounce(func, wait) {\n    var timeout;\n    return function () {\n        var context = this;\n        var args = arguments;\n        clearTimeout(timeout)\n        timeout = setTimeout(function(){\n            func.apply(context, args)\n        }, wait);\n    }\n}\n")),(0,a.kt)("p",null,"\u4f7f\u7528\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var node = document.getElementById('layout')\nfunction getUserAction(e) {\n    console.log(this, e)  // \u5206\u522b\u6253\u5370\uff1anode \u8fd9\u4e2a\u8282\u70b9 \u548c MouseEvent\n    node.innerHTML = count++;\n};\nnode.onmousemove = debounce(getUserAction, 1000)\n")),(0,a.kt)("p",null,"\u6700\u7ec8\u7248\uff1a\u9664\u4e86\u652f\u6301 this \u548c event \u5916\uff0c\u8fd8\u652f\u6301\u4ee5\u4e0b\u529f\u80fd\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u652f\u6301\u7acb\u5373\u6267\u884c\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u51fd\u6570\u53ef\u80fd\u6709\u8fd4\u56de\u503c\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u652f\u6301\u53d6\u6d88\u529f\u80fd\uff1b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function debounce(func, wait, immediate) {\n    var timeout, result;\n    \n    var debounced = function () {\n        var context = this;\n        var args = arguments;\n        \n        if (timeout) clearTimeout(timeout);\n        if (immediate) {\n            // \u5982\u679c\u5df2\u7ecf\u6267\u884c\u8fc7\uff0c\u4e0d\u518d\u6267\u884c\n            var callNow = !timeout;\n            timeout = setTimeout(function(){\n                timeout = null;\n            }, wait)\n            if (callNow) result = func.apply(context, args)\n        } else {\n            timeout = setTimeout(function(){\n                func.apply(context, args)\n            }, wait);\n        }\n        return result;\n    };\n\n    debounced.cancel = function() {\n        clearTimeout(timeout);\n        timeout = null;\n    };\n\n    return debounced;\n}\n")),(0,a.kt)("p",null,"\u4f7f\u7528\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var setUseAction = debounce(getUserAction, 10000, true);\n// \u4f7f\u7528\u9632\u6296\nnode.onmousemove = setUseAction\n\n// \u53d6\u6d88\u9632\u6296\nsetUseAction.cancel()\n")),(0,a.kt)("p",null,"\u53c2\u8003\uff1aJavaScript\u4e13\u9898\u4e4b\u8ddf\u7740underscore\u5b66\u9632\u6296"),(0,a.kt)("h2",{id:"\u51fd\u6570\u8282\u6d41"},"\u51fd\u6570\u8282\u6d41"),(0,a.kt)("p",null,"\u89e6\u53d1\u9ad8\u9891\u4e8b\u4ef6\uff0c\u4e14 N \u79d2\u5185\u53ea\u6267\u884c\u4e00\u6b21\u3002"),(0,a.kt)("p",null,"\u7b80\u5355\u7248\uff1a\u4f7f\u7528\u65f6\u95f4\u6233\u6765\u5b9e\u73b0\uff0c\u7acb\u5373\u6267\u884c\u4e00\u6b21\uff0c\u7136\u540e\u6bcf N \u79d2\u6267\u884c\u4e00\u6b21\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function throttle(func, wait) {\n    var context, args;\n    var previous = 0;\n\n    return function() {\n        var now = +new Date();\n        context = this;\n        args = arguments;\n        if (now - previous > wait) {\n            func.apply(context, args);\n            previous = now;\n        }\n    }\n}\n")),(0,a.kt)("p",null,"\u6700\u7ec8\u7248\uff1a\u652f\u6301\u53d6\u6d88\u8282\u6d41\uff1b\u53e6\u5916\u901a\u8fc7\u4f20\u5165\u7b2c\u4e09\u4e2a\u53c2\u6570\uff0coptions.leading \u6765\u8868\u793a\u662f\u5426\u53ef\u4ee5\u7acb\u5373\u6267\u884c\u4e00\u6b21\uff0copitons.trailing \u8868\u793a\u7ed3\u675f\u8c03\u7528\u7684\u65f6\u5019\u662f\u5426\u8fd8\u8981\u6267\u884c\u4e00\u6b21\uff0c\u9ed8\u8ba4\u90fd\u662f true\u3002\u6ce8\u610f\u8bbe\u7f6e\u7684\u65f6\u5019\u4e0d\u80fd\u540c\u65f6\u5c06 leading \u6216 trailing \u8bbe\u7f6e\u4e3a false\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function throttle(func, wait, options) {\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options) options = {};\n\n    var later = function() {\n        previous = options.leading === false ? 0 : new Date().getTime();\n        timeout = null;\n        func.apply(context, args);\n        if (!timeout) context = args = null;\n    };\n\n    var throttled = function() {\n        var now = new Date().getTime();\n        if (!previous && options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            func.apply(context, args);\n            if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n    };\n    \n    throttled.cancel = function() {\n        clearTimeout(timeout);\n        previous = 0;\n        timeout = null;\n    }\n    return throttled;\n}\n")),(0,a.kt)("p",null,"\u8282\u6d41\u7684\u4f7f\u7528\u5c31\u4e0d\u62ff\u4ee3\u7801\u4e3e\u4f8b\u4e86\uff0c\u53c2\u8003\u9632\u6296\u7684\u5199\u5c31\u884c\u3002"),(0,a.kt)("p",null,"\u53c2\u8003\uff1aJavaScript\u4e13\u9898\u4e4b\u8ddf\u7740 underscore \u5b66\u8282\u6d41"),(0,a.kt)("h2",{id:"\u51fd\u6570\u67ef\u91cc\u5316"},"\u51fd\u6570\u67ef\u91cc\u5316"),(0,a.kt)("p",null,"\u4ec0\u4e48\u53eb\u51fd\u6570\u67ef\u91cc\u5316\uff1f\u5176\u5b9e\u5c31\u662f\u5c06\u4f7f\u7528\u591a\u4e2a\u53c2\u6570\u7684\u51fd\u6570\u8f6c\u6362\u6210\u4e00\u7cfb\u5217\u4f7f\u7528\u4e00\u4e2a\u53c2\u6570\u7684\u51fd\u6570\u7684\u6280\u672f\u3002\u8fd8\u4e0d\u61c2\uff1f\u6765\u4e3e\u4e2a\u4f8b\u5b50\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function add(a, b, c) {\n    return a + b + c\n}\nadd(1, 2, 3)\nlet addCurry = curry(add)\naddCurry(1)(2)(3)\n")),(0,a.kt)("p",null,"\u73b0\u5728\u5c31\u662f\u8981\u5b9e\u73b0 curry \u8fd9\u4e2a\u51fd\u6570\uff0c\u4f7f\u51fd\u6570\u4ece\u4e00\u6b21\u8c03\u7528\u4f20\u5165\u591a\u4e2a\u53c2\u6570\u53d8\u6210\u591a\u6b21\u8c03\u7528\u6bcf\u6b21\u4f20\u4e00\u4e2a\u53c2\u6570\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function curry(fn) {\n    let judge = (...args) => {\n        if (args.length == fn.length) return fn(...args)\n        return (...arg) => judge(...args, ...arg)\n    }\n    return judge\n}\n")),(0,a.kt)("h2",{id:"\u504f\u51fd\u6570"},"\u504f\u51fd\u6570"),(0,a.kt)("p",null,"\u4ec0\u4e48\u662f\u504f\u51fd\u6570\uff1f\u504f\u51fd\u6570\u5c31\u662f\u5c06\u4e00\u4e2a n \u53c2\u7684\u51fd\u6570\u8f6c\u6362\u6210\u56fa\u5b9a x \u53c2\u7684\u51fd\u6570\uff0c\u5269\u4f59\u53c2\u6570\uff08n - x\uff09\u5c06\u5728\u4e0b\u6b21\u8c03\u7528\u5168\u90e8\u4f20\u5165\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function add(a, b, c) {\n    return a + b + c\n}\nlet partialAdd = partial(add, 1)\npartialAdd(2, 3)\n")),(0,a.kt)("p",null,"\u53d1\u73b0\u6ca1\u6709\uff0c\u5176\u5b9e\u504f\u51fd\u6570\u548c\u51fd\u6570\u67ef\u91cc\u5316\u6709\u70b9\u50cf\uff0c\u6240\u4ee5\u6839\u636e\u51fd\u6570\u67ef\u91cc\u5316\u7684\u5b9e\u73b0\uff0c\u80fd\u591f\u80fd\u5f88\u5feb\u5199\u51fa\u504f\u51fd\u6570\u7684\u5b9e\u73b0\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function partial(fn, ...args) {\n    return (...arg) => {\n        return fn(...args, ...arg)\n    }\n}\n")),(0,a.kt)("p",null,"\u5982\u4e0a\u8fd9\u4e2a\u529f\u80fd\u6bd4\u8f83\u7b80\u5355\uff0c\u73b0\u5728\u6211\u4eec\u5e0c\u671b\u504f\u51fd\u6570\u80fd\u548c\u67ef\u91cc\u5316\u4e00\u6837\u80fd\u5b9e\u73b0\u5360\u4f4d\u529f\u80fd\uff0c\u6bd4\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function clg(a, b, c) {\n    console.log(a, b, c)\n}\nlet partialClg = partial(clg, '_', 2)\npartialClg(1, 3)  // \u4f9d\u6b21\u6253\u5370\uff1a1, 2, 3\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"_")," \u5360\u7684\u4f4d\u5176\u5b9e\u5c31\u662f 1 \u7684\u4f4d\u7f6e\u3002\u76f8\u5f53\u4e8e\uff1apartial(clg, 1, 2)\uff0c\u7136\u540e partialClg(3)\u3002\u660e\u767d\u4e86\u539f\u7406\uff0c\u6211\u4eec\u5c31\u6765\u5199\u5b9e\u73b0\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function partial(fn, ...args) {\n    return (...arg) => {\n        args[index] = \n        return fn(...args, ...arg)\n    }\n}\n")),(0,a.kt)("h2",{id:"jsonp"},"JSONP"),(0,a.kt)("p",null,"JSONP \u6838\u5fc3\u539f\u7406\uff1ascript \u6807\u7b7e\u4e0d\u53d7\u540c\u6e90\u7b56\u7565\u7ea6\u675f\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u6765\u8fdb\u884c\u8de8\u57df\u8bf7\u6c42\uff0c\u4f18\u70b9\u662f\u517c\u5bb9\u6027\u597d\uff0c\u4f46\u662f\u53ea\u80fd\u7528\u4e8e GET \u8bf7\u6c42\uff1b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const jsonp = ({ url, params, callbackName }) => {\n    const generateUrl = () => {\n        let dataSrc = ''\n        for (let key in params) {\n            if (params.hasOwnProperty(key)) {\n                dataSrc += `${key}=${params[key]}&`\n            }\n        }\n        dataSrc += `callback=${callbackName}`\n        return `${url}?${dataSrc}`\n    }\n    return new Promise((resolve, reject) => {\n        const scriptEle = document.createElement('script')\n        scriptEle.src = generateUrl()\n        document.body.appendChild(scriptEle)\n        window[callbackName] = data => {\n            resolve(data)\n            document.removeChild(scriptEle)\n        }\n    })\n}\n")),(0,a.kt)("h2",{id:"ajax"},"AJAX"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const getJSON = function(url) {\n    return new Promise((resolve, reject) => {\n        const xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Mscrosoft.XMLHttp');\n        xhr.open('GET', url, false);\n        xhr.setRequestHeader('Accept', 'application/json');\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState !== 4) return;\n            if (xhr.status === 200 || xhr.status === 304) {\n                resolve(xhr.responseText);\n            } else {\n                reject(new Error(xhr.responseText));\n            }\n        }\n        xhr.send();\n    })\n}\n")),(0,a.kt)("h2",{id:"\u5b9e\u73b0\u6570\u7ec4\u539f\u578b\u65b9\u6cd5"},"\u5b9e\u73b0\u6570\u7ec4\u539f\u578b\u65b9\u6cd5"),(0,a.kt)("h3",{id:"foreach"},"forEach"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Array.prototype.forEach2 = function(callback, thisArg) {\n    if (this == null) {\n        throw new TypeError('this is null or not defined')\n    }\n    if (typeof callback !== \"function\") {\n        throw new TypeError(callback + ' is not a function')\n    }\n    const O = Object(this)  // this \u5c31\u662f\u5f53\u524d\u7684\u6570\u7ec4\n    const len = O.length >>> 0  // \u540e\u9762\u6709\u89e3\u91ca\n    let k = 0\n    while (k < len) {\n        if (k in O) {\n            callback.call(thisArg, O[k], k, O);\n        }\n        k++;\n    }\n}\n")),(0,a.kt)("p",null,"\u53c2\u8003\uff1a",(0,a.kt)("strong",{parentName:"p"},"forEach#polyfill"),"[2]"),(0,a.kt)("p",null,"O.length >>> 0 \u662f\u4ec0\u4e48\u64cd\u4f5c\uff1f\u5c31\u662f\u65e0\u7b26\u53f7\u53f3\u79fb 0 \u4f4d\uff0c\u90a3\u6709\u4ec0\u4e48\u610f\u4e49\u561b\uff1f\u5c31\u662f\u4e3a\u4e86\u4fdd\u8bc1\u8f6c\u6362\u540e\u7684\u503c\u4e3a\u6b63\u6574\u6570\u3002\u5176\u5b9e\u5e95\u5c42\u505a\u4e86 2 \u5c42\u8f6c\u6362\uff0c\u7b2c\u4e00\u662f\u975e number \u8f6c\u6210 number \u7c7b\u578b\uff0c\u7b2c\u4e8c\u662f\u5c06 number \u8f6c\u6210 Uint32 \u7c7b\u578b\u3002\u611f\u5174\u8da3\u53ef\u4ee5\u9605\u8bfb ",(0,a.kt)("strong",{parentName:"p"},"something >>> 0\u662f\u4ec0\u4e48\u610f\u601d?"),"[3]","\u3002"),(0,a.kt)("h3",{id:"map"},"map"),(0,a.kt)("p",null,"\u57fa\u4e8e forEach \u7684\u5b9e\u73b0\u80fd\u591f\u5f88\u5bb9\u6613\u5199\u51fa map \u7684\u5b9e\u73b0\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"- Array.prototype.forEach2 = function(callback, thisArg) {\n+ Array.prototype.map2 = function(callback, thisArg) {\n    if (this == null) {\n        throw new TypeError('this is null or not defined')\n    }\n    if (typeof callback !== \"function\") {\n        throw new TypeError(callback + ' is not a function')\n    }\n    const O = Object(this)\n    const len = O.length >>> 0\n-   let k = 0\n+   let k = 0, res = []\n    while (k < len) {\n        if (k in O) {\n-           callback.call(thisArg, O[k], k, O);\n+           res[k] = callback.call(thisArg, O[k], k, O);\n        }\n        k++;\n    }\n+   return res\n}\n")),(0,a.kt)("h3",{id:"filter"},"filter"),(0,a.kt)("p",null,"\u540c\u6837\uff0c\u57fa\u4e8e forEach \u7684\u5b9e\u73b0\u80fd\u591f\u5f88\u5bb9\u6613\u5199\u51fa filter \u7684\u5b9e\u73b0\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"- Array.prototype.forEach2 = function(callback, thisArg) {\n+ Array.prototype.filter2 = function(callback, thisArg) {\n    if (this == null) {\n        throw new TypeError('this is null or not defined')\n    }\n    if (typeof callback !== \"function\") {\n        throw new TypeError(callback + ' is not a function')\n    }\n    const O = Object(this)\n    const len = O.length >>> 0\n-   let k = 0\n+   let k = 0, res = []\n    while (k < len) {\n        if (k in O) {\n-           callback.call(thisArg, O[k], k, O);\n+           if (callback.call(thisArg, O[k], k, O)) {\n+               res.push(O[k])                \n+           }\n        }\n        k++;\n    }\n+   return res\n}\n")),(0,a.kt)("h3",{id:"some"},"some"),(0,a.kt)("p",null,"\u540c\u6837\uff0c\u57fa\u4e8e forEach \u7684\u5b9e\u73b0\u80fd\u591f\u5f88\u5bb9\u6613\u5199\u51fa some \u7684\u5b9e\u73b0\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"- Array.prototype.forEach2 = function(callback, thisArg) {\n+ Array.prototype.some2 = function(callback, thisArg) {\n    if (this == null) {\n        throw new TypeError('this is null or not defined')\n    }\n    if (typeof callback !== \"function\") {\n        throw new TypeError(callback + ' is not a function')\n    }\n    const O = Object(this)\n    const len = O.length >>> 0\n    let k = 0\n    while (k < len) {\n        if (k in O) {\n-           callback.call(thisArg, O[k], k, O);\n+           if (callback.call(thisArg, O[k], k, O)) {\n+               return true\n+           }\n        }\n        k++;\n    }\n+   return false\n}\n")),(0,a.kt)("h3",{id:"reduce"},"reduce"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Array.prototype.reduce2 = function(callback, initialValue) {\n    if (this == null) {\n        throw new TypeError('this is null or not defined')\n    }\n    if (typeof callback !== \"function\") {\n        throw new TypeError(callback + ' is not a function')\n    }\n    const O = Object(this)\n    const len = O.length >>> 0\n    let k = 0, acc\n    \n    if (arguments.length > 1) {\n        acc = initialValue\n    } else {\n        // \u6ca1\u4f20\u5165\u521d\u59cb\u503c\u7684\u65f6\u5019\uff0c\u53d6\u6570\u7ec4\u4e2d\u7b2c\u4e00\u4e2a\u975e empty \u7684\u503c\u4e3a\u521d\u59cb\u503c\n        while (k < len && !(k in O)) {\n            k++\n        }\n        if (k > len) {\n            throw new TypeError( 'Reduce of empty array with no initial value' );\n        }\n        acc = O[k++]\n    }\n    while (k < len) {\n        if (k in O) {\n            acc = callback(acc, O[k], k, O)\n        }\n        k++\n    }\n    return acc\n}\n")),(0,a.kt)("h2",{id:"\u5b9e\u73b0\u51fd\u6570\u539f\u578b\u65b9\u6cd5"},"\u5b9e\u73b0\u51fd\u6570\u539f\u578b\u65b9\u6cd5"),(0,a.kt)("h3",{id:"call"},"call"),(0,a.kt)("p",null,"\u4f7f\u7528\u4e00\u4e2a\u6307\u5b9a\u7684 this \u503c\u548c\u4e00\u4e2a\u6216\u591a\u4e2a\u53c2\u6570\u6765\u8c03\u7528\u4e00\u4e2a\u51fd\u6570\u3002"),(0,a.kt)("p",null,"\u5b9e\u73b0\u8981\u70b9\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"this \u53ef\u80fd\u4f20\u5165 null\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u4f20\u5165\u4e0d\u56fa\u5b9a\u4e2a\u6570\u7684\u53c2\u6570\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u51fd\u6570\u53ef\u80fd\u6709\u8fd4\u56de\u503c\uff1b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Function.prototype.call2 = function (context) {\n    var context = context || window;\n    context.fn = this;\n\n    var args = [];\n    for(var i = 1, len = arguments.length; i < len; i++) {\n        args.push('arguments[' + i + ']');\n    }\n\n    var result = eval('context.fn(' + args +')');\n\n    delete context.fn\n    return result;\n}\n")),(0,a.kt)("h3",{id:"apply"},"apply"),(0,a.kt)("p",null,"apply \u548c call \u4e00\u6837\uff0c\u552f\u4e00\u7684\u533a\u522b\u5c31\u662f call \u662f\u4f20\u5165\u4e0d\u56fa\u5b9a\u4e2a\u6570\u7684\u53c2\u6570\uff0c\u800c apply \u662f\u4f20\u5165\u4e00\u4e2a\u6570\u7ec4\u3002"),(0,a.kt)("p",null,"\u5b9e\u73b0\u8981\u70b9\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"this \u53ef\u80fd\u4f20\u5165 null\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u4f20\u5165\u4e00\u4e2a\u6570\u7ec4\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u51fd\u6570\u53ef\u80fd\u6709\u8fd4\u56de\u503c\uff1b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Function.prototype.apply2 = function (context, arr) {\n    var context = context || window;\n    context.fn = this;\n\n    var result;\n    if (!arr) {\n        result = context.fn();\n    } else {\n        var args = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            args.push('arr[' + i + ']');\n        }\n        result = eval('context.fn(' + args + ')')\n    }\n\n    delete context.fn\n    return result;\n}\n")),(0,a.kt)("h3",{id:"bind"},"bind"),(0,a.kt)("p",null,"bind \u65b9\u6cd5\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\uff0c\u5728 bind() \u88ab\u8c03\u7528\u65f6\uff0c\u8fd9\u4e2a\u65b0\u51fd\u6570\u7684 this \u88ab\u6307\u5b9a\u4e3a bind() \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u800c\u5176\u4f59\u53c2\u6570\u5c06\u4f5c\u4e3a\u65b0\u51fd\u6570\u7684\u53c2\u6570\uff0c\u4f9b\u8c03\u7528\u65f6\u4f7f\u7528\u3002"),(0,a.kt)("p",null,"\u5b9e\u73b0\u8981\u70b9\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"bind() \u9664\u4e86 this \u5916\uff0c\u8fd8\u53ef\u4f20\u5165\u591a\u4e2a\u53c2\u6570\uff1b"),(0,a.kt)("li",{parentName:"ul"},"bing \u521b\u5efa\u7684\u65b0\u51fd\u6570\u53ef\u80fd\u4f20\u5165\u591a\u4e2a\u53c2\u6570\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u65b0\u51fd\u6570\u53ef\u80fd\u88ab\u5f53\u505a\u6784\u9020\u51fd\u6570\u8c03\u7528\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u51fd\u6570\u53ef\u80fd\u6709\u8fd4\u56de\u503c\uff1b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Function.prototype.bind2 = function (context) {\n    var self = this;\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    var fNOP = function () {};\n\n    var fBound = function () {\n        var bindArgs = Array.prototype.slice.call(arguments);\n        return self.apply(this instanceof fNOP ? this : context, args.concat(bindArgs));\n    }\n\n    fNOP.prototype = this.prototype;\n    fBound.prototype = new fNOP();\n    return fBound;\n}\n")),(0,a.kt)("h2",{id:"\u5b9e\u73b0-new-\u5173\u952e\u5b57"},"\u5b9e\u73b0 new \u5173\u952e\u5b57"),(0,a.kt)("p",null,"new \u8fd0\u7b97\u7b26\u7528\u6765\u521b\u5efa\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u5bf9\u8c61\u7c7b\u578b\u7684\u5b9e\u4f8b\u6216\u8005\u5177\u6709\u6784\u9020\u51fd\u6570\u7684\u5185\u7f6e\u5bf9\u8c61\u7684\u5b9e\u4f8b\u3002"),(0,a.kt)("p",null,"\u5b9e\u73b0\u8981\u70b9\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"new \u4f1a\u4ea7\u751f\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u65b0\u5bf9\u8c61\u9700\u8981\u80fd\u591f\u8bbf\u95ee\u5230\u6784\u9020\u51fd\u6570\u7684\u5c5e\u6027\uff0c\u6240\u4ee5\u9700\u8981\u91cd\u65b0\u6307\u5b9a\u5b83\u7684\u539f\u578b\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u6784\u9020\u51fd\u6570\u53ef\u80fd\u4f1a\u663e\u793a\u8fd4\u56de\uff1b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function objectFactory() {\n    var obj = new Object()\n    Constructor = [].shift.call(arguments);\n    obj.__proto__ = Constructor.prototype;\n    var ret = Constructor.apply(obj, arguments);\n    \n    // ret || obj \u8fd9\u91cc\u8fd9\u4e48\u5199\u8003\u8651\u4e86\u6784\u9020\u51fd\u6570\u663e\u793a\u8fd4\u56de null \u7684\u60c5\u51b5\n    return typeof ret === 'object' ? ret || obj : obj;\n};\n")),(0,a.kt)("p",null,"\u4f7f\u7528\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function person(name, age) {\n    this.name = name\n    this.age = age\n}\nlet p = objectFactory(person, '\u5e03\u5170', 12)\nconsole.log(p)  // { name: '\u5e03\u5170', age: 12 }\n")),(0,a.kt)("h2",{id:"\u5b9e\u73b0-instanceof-\u5173\u952e\u5b57"},"\u5b9e\u73b0 instanceof \u5173\u952e\u5b57"),(0,a.kt)("p",null,"instanceof \u5c31\u662f\u5224\u65ad\u6784\u9020\u51fd\u6570\u7684 prototype \u5c5e\u6027\u662f\u5426\u51fa\u73b0\u5728\u5b9e\u4f8b\u7684\u539f\u578b\u94fe\u4e0a\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function instanceOf(left, right) {\n    let proto = left.__proto__\n    while (true) {\n        if (proto === null) return false\n        if (proto === right.prototype) {\n            return true\n        }\n        proto = proto.__proto__\n    }\n}\n")),(0,a.kt)("p",null,"\u4e0a\u9762\u7684 left.",(0,a.kt)("strong",{parentName:"p"},"proto")," \u8fd9\u79cd\u5199\u6cd5\u53ef\u4ee5\u6362\u6210 Object.getPrototypeOf(left)\u3002"),(0,a.kt)("h2",{id:"\u5b9e\u73b0-objectcreate"},"\u5b9e\u73b0 Object.create"),(0,a.kt)("p",null,"Object.create()\u65b9\u6cd5\u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\uff0c\u4f7f\u7528\u73b0\u6709\u7684\u5bf9\u8c61\u6765\u63d0\u4f9b\u65b0\u521b\u5efa\u7684\u5bf9\u8c61\u7684",(0,a.kt)("strong",{parentName:"p"},"proto"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Object.create2 = function(proto, propertyObject = undefined) {\n    if (typeof proto !== 'object' && typeof proto !== 'function') {\n        throw new TypeError('Object prototype may only be an Object or null.')\n    if (propertyObject == null) {\n        new TypeError('Cannot convert undefined or null to object')\n    }\n    function F() {}\n    F.prototype = proto\n    const obj = new F()\n    if (propertyObject != undefined) {\n        Object.defineProperties(obj, propertyObject)\n    }\n    if (proto === null) {\n        // \u521b\u5efa\u4e00\u4e2a\u6ca1\u6709\u539f\u578b\u5bf9\u8c61\u7684\u5bf9\u8c61\uff0cObject.create(null)\n        obj.__proto__ = null\n    }\n    return obj\n}\n")),(0,a.kt)("h2",{id:"\u5b9e\u73b0-objectassign"},"\u5b9e\u73b0 Object.assign"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Object.assign2 = function(target, ...source) {\n    if (target == null) {\n        throw new TypeError('Cannot convert undefined or null to object')\n    }\n    let ret = Object(target) \n    source.forEach(function(obj) {\n        if (obj != null) {\n            for (let key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    ret[key] = obj[key]\n                }\n            }\n        }\n    })\n    return ret\n}\n")),(0,a.kt)("h2",{id:"\u5b9e\u73b0-jsonstringify"},"\u5b9e\u73b0 JSON.stringify"),(0,a.kt)("p",null,"JSON.stringify([, replacer ","[, space]",") \u65b9\u6cd5\u662f\u5c06\u4e00\u4e2a JavaScript \u503c(\u5bf9\u8c61\u6216\u8005\u6570\u7ec4)\u8f6c\u6362\u4e3a\u4e00\u4e2a JSON \u5b57\u7b26\u4e32\u3002\u6b64\u5904\u6a21\u62df\u5b9e\u73b0\uff0c\u4e0d\u8003\u8651\u53ef\u9009\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570 replacer \u548c\u7b2c\u4e09\u4e2a\u53c2\u6570 space\uff0c\u5982\u679c\u5bf9\u8fd9\u4e24\u4e2a\u53c2\u6570\u7684\u4f5c\u7528\u8fd8\u4e0d\u4e86\u89e3\uff0c\u5efa\u8bae\u9605\u8bfb ",(0,a.kt)("strong",{parentName:"p"},"MDN"),"[4]"," \u6587\u6863\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff1a")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"undefined \u8f6c\u6362\u4e4b\u540e\u4ecd\u662f undefined(\u7c7b\u578b\u4e5f\u662f undefined)"),(0,a.kt)("li",{parentName:"ul"},'boolean \u503c\u8f6c\u6362\u4e4b\u540e\u662f\u5b57\u7b26\u4e32 "false"/"true"'),(0,a.kt)("li",{parentName:"ul"},"number \u7c7b\u578b(\u9664\u4e86 NaN \u548c Infinity)\u8f6c\u6362\u4e4b\u540e\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u6570\u503c"),(0,a.kt)("li",{parentName:"ul"},"symbol \u8f6c\u6362\u4e4b\u540e\u662f undefined"),(0,a.kt)("li",{parentName:"ul"},'null \u8f6c\u6362\u4e4b\u540e\u662f\u5b57\u7b26\u4e32 "null"'),(0,a.kt)("li",{parentName:"ul"},"string \u8f6c\u6362\u4e4b\u540e\u4ecd\u662fstring"),(0,a.kt)("li",{parentName:"ul"},'NaN \u548c Infinity \u8f6c\u6362\u4e4b\u540e\u662f\u5b57\u7b26\u4e32 "null"'))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u51fd\u6570\u7c7b\u578b\uff1a\u8f6c\u6362\u4e4b\u540e\u662f undefined")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u5982\u679c\u662f\u5bf9\u8c61\u7c7b\u578b(\u975e\u51fd\u6570)")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709 toJSON() \u65b9\u6cd5\uff0c\u90a3\u4e48\u5e8f\u5217\u5316 toJSON() \u7684\u8fd4\u56de\u503c\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u5c5e\u6027\u503c\u4e2d\u51fa\u73b0\u4e86 undefined\u3001\u4efb\u610f\u7684\u51fd\u6570\u4ee5\u53ca symbol \u503c\uff0c\u5ffd\u7565\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u6240\u6709\u4ee5 symbol \u4e3a\u5c5e\u6027\u952e\u7684\u5c5e\u6027\u90fd\u4f1a\u88ab\u5b8c\u5168\u5ffd\u7565\u6389\u3002"),(0,a.kt)("li",{parentName:"ul"},'\u5982\u679c\u662f\u4e00\u4e2a\u6570\u7ec4\uff1a\u5982\u679c\u5c5e\u6027\u503c\u4e2d\u51fa\u73b0\u4e86 undefined\u3001\u4efb\u610f\u7684\u51fd\u6570\u4ee5\u53ca symbol\uff0c\u8f6c\u6362\u6210\u5b57\u7b26\u4e32 "null" \uff1b'),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f RegExp \u5bf9\u8c61\uff1a\u8fd4\u56de {} (\u7c7b\u578b\u662f string)\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f Date \u5bf9\u8c61\uff0c\u8fd4\u56de Date \u7684 toJSON \u5b57\u7b26\u4e32\u503c\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u662f\u666e\u901a\u5bf9\u8c61\uff1b"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u5bf9\u5305\u542b\u5faa\u73af\u5f15\u7528\u7684\u5bf9\u8c61\uff08\u5bf9\u8c61\u4e4b\u95f4\u76f8\u4e92\u5f15\u7528\uff0c\u5f62\u6210\u65e0\u9650\u5faa\u73af\uff09\u6267\u884c\u6b64\u65b9\u6cd5\uff0c\u4f1a\u629b\u51fa\u9519\u8bef\u3002"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function jsonStringify(data) {\n    let dataType = typeof data;\n    \n    if (dataType !== 'object') {\n        let result = data;\n        //data \u53ef\u80fd\u662f string/number/null/undefined/boolean\n        if (Number.isNaN(data) || data === Infinity) {\n            //NaN \u548c Infinity \u5e8f\u5217\u5316\u8fd4\u56de \"null\"\n            result = \"null\";\n        } else if (dataType === 'function' || dataType === 'undefined' || dataType === 'symbol') {\n            //function \u3001undefined \u3001symbol \u5e8f\u5217\u5316\u8fd4\u56de undefined\n            return undefined;\n        } else if (dataType === 'string') {\n            result = '\"' + data + '\"';\n        }\n        //boolean \u8fd4\u56de String()\n        return String(result);\n    } else if (dataType === 'object') {\n        if (data === null) {\n            return \"null\"\n        } else if (data.toJSON && typeof data.toJSON === 'function') {\n            return jsonStringify(data.toJSON());\n        } else if (data instanceof Array) {\n            let result = [];\n            //\u5982\u679c\u662f\u6570\u7ec4\n            //toJSON \u65b9\u6cd5\u53ef\u4ee5\u5b58\u5728\u4e8e\u539f\u578b\u94fe\u4e2d\n            data.forEach((item, index) => {\n                if (typeof item === 'undefined' || typeof item === 'function' || typeof item === 'symbol') {\n                    result[index] = \"null\";\n                } else {\n                    result[index] = jsonStringify(item);\n                }\n            });\n            result = \"[\" + result + \"]\";\n            return result.replace(/'/g, '\"');\n            \n        } else {\n            //\u666e\u901a\u5bf9\u8c61\n            /**\n             * \u5faa\u73af\u5f15\u7528\u629b\u9519(\u6682\u672a\u68c0\u6d4b\uff0c\u5faa\u73af\u5f15\u7528\u65f6\uff0c\u5806\u6808\u6ea2\u51fa)\n             * symbol key \u5ffd\u7565\n             * undefined\u3001\u51fd\u6570\u3001symbol \u4e3a\u5c5e\u6027\u503c\uff0c\u88ab\u5ffd\u7565\n             */\n            let result = [];\n            Object.keys(data).forEach((item, index) => {\n                if (typeof item !== 'symbol') {\n                    //key \u5982\u679c\u662fsymbol\u5bf9\u8c61\uff0c\u5ffd\u7565\n                    if (data[item] !== undefined && typeof data[item] !== 'function'\n                        && typeof data[item] !== 'symbol') {\n                        //\u952e\u503c\u5982\u679c\u662f undefined\u3001\u51fd\u6570\u3001symbol \u4e3a\u5c5e\u6027\u503c\uff0c\u5ffd\u7565\n                        result.push('\"' + item + '\"' + \":\" + jsonStringify(data[item]));\n                    }\n                }\n            });\n            return (\"{\" + result + \"}\").replace(/'/g, '\"');\n        }\n    }\n}\n")),(0,a.kt)("p",null,"\u53c2\u8003\uff1a",(0,a.kt)("strong",{parentName:"p"},"\u5b9e\u73b0 JSON.stringify"),"[5]"),(0,a.kt)("h2",{id:"\u5b9e\u73b0-jsonparse"},"\u5b9e\u73b0 JSON.parse"),(0,a.kt)("p",null,"\u4ecb\u7ecd 2 \u79cd\u65b9\u6cd5\u5b9e\u73b0\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"eval \u5b9e\u73b0\uff1b"),(0,a.kt)("li",{parentName:"ul"},"new Function \u5b9e\u73b0\uff1b")),(0,a.kt)("h3",{id:"eval-\u5b9e\u73b0"},"eval \u5b9e\u73b0"),(0,a.kt)("p",null,"\u7b2c\u4e00\u79cd\u65b9\u5f0f\u6700\u7b80\u5355\uff0c\u4e5f\u6700\u76f4\u89c2\uff0c\u5c31\u662f\u76f4\u63a5\u8c03\u7528 eval\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'var json = \'{"a":"1", "b":2}\';\nvar obj = eval("(" + json + ")");  // obj \u5c31\u662f json \u53cd\u5e8f\u5217\u5316\u4e4b\u540e\u5f97\u5230\u7684\u5bf9\u8c61\n')),(0,a.kt)("p",null,"\u4f46\u662f\u76f4\u63a5\u8c03\u7528 eval \u4f1a\u5b58\u5728\u5b89\u5168\u95ee\u9898\uff0c\u5982\u679c\u6570\u636e\u4e2d\u53ef\u80fd\u4e0d\u662f json \u6570\u636e\uff0c\u800c\u662f\u53ef\u6267\u884c\u7684 JavaScript \u4ee3\u7801\uff0c\u90a3\u5f88\u53ef\u80fd\u4f1a\u9020\u6210 XSS \u653b\u51fb\u3002\u56e0\u6b64\uff0c\u5728\u8c03\u7528 eval \u4e4b\u524d\uff0c\u9700\u8981\u5bf9\u6570\u636e\u8fdb\u884c\u6821\u9a8c\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'var rx_one = /^[\\],:{}\\s]*$/;\nvar rx_two = /\\\\(?:["\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nvar rx_three = /"[^"\\\\\\n\\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nvar rx_four = /(?:^|:|,)(?:\\s*\\[)+/g;\n\nif (\n    rx_one.test(\n        json.replace(rx_two, "@")\n            .replace(rx_three, "]")\n            .replace(rx_four, "")\n    )\n) {\n    var obj = eval("(" +json + ")");\n}\n')),(0,a.kt)("p",null,"\u53c2\u8003\uff1a",(0,a.kt)("strong",{parentName:"p"},"JSON.parse \u4e09\u79cd\u5b9e\u73b0\u65b9\u5f0f"),"[6]"),(0,a.kt)("h3",{id:"new-function-\u5b9e\u73b0"},"new Function \u5b9e\u73b0"),(0,a.kt)("p",null,"Function \u4e0e eval \u6709\u76f8\u540c\u7684\u5b57\u7b26\u4e32\u53c2\u6570\u7279\u6027\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'var json = \'{"name":"\u5c0f\u59d0\u59d0", "age":20}\';\nvar obj = (new Function(\'return \' + json))();\n')),(0,a.kt)("h2",{id:"\u5b9e\u73b0-promise"},"\u5b9e\u73b0 Promise"),(0,a.kt)("p",null,"\u5b9e\u73b0 Promise \u9700\u8981\u5b8c\u5168\u8bfb\u61c2 ",(0,a.kt)("strong",{parentName:"p"},"Promise A+ \u89c4\u8303"),"[7]","\uff0c\u4e0d\u8fc7\u4ece\u603b\u4f53\u7684\u5b9e\u73b0\u4e0a\u770b\uff0c\u6709\u5982\u4e0b\u51e0\u4e2a\u70b9\u9700\u8981\u8003\u8651\u5230\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"then \u9700\u8981\u652f\u6301\u94fe\u5f0f\u8c03\u7528\uff0c\u6240\u4ee5\u5f97\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Promise\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u5904\u7406\u5f02\u6b65\u95ee\u9898\uff0c\u6240\u4ee5\u5f97\u5148\u7528 onResolvedCallbacks \u548c onRejectedCallbacks \u5206\u522b\u628a\u6210\u529f\u548c\u5931\u8d25\u7684\u56de\u8c03\u5b58\u8d77\u6765\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u4e3a\u4e86\u8ba9\u94fe\u5f0f\u8c03\u7528\u6b63\u5e38\u8fdb\u884c\u4e0b\u53bb\uff0c\u9700\u8981\u5224\u65ad onFulfilled \u548c onRejected \u7684\u7c7b\u578b\uff1b"),(0,a.kt)("li",{parentName:"ul"},"onFulfilled \u548c onRejected \u9700\u8981\u88ab\u5f02\u6b65\u8c03\u7528\uff0c\u8fd9\u91cc\u7528 setTimeout \u6a21\u62df\u5f02\u6b65\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u5904\u7406 Promise \u7684 resolve\uff1b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const PENDING = \'pending\';\nconst FULFILLED = \'fulfilled\';\nconst REJECTED = \'rejected\';\n\nclass Promise {\n    constructor(executor) {\n        this.status = PENDING;\n        this.value = undefined;\n        this.reason = undefined;\n        this.onResolvedCallbacks = [];\n        this.onRejectedCallbacks = [];\n        \n        let resolve = (value) = > {\n            if (this.status === PENDING) {\n                this.status = FULFILLED;\n                this.value = value;\n                this.onResolvedCallbacks.forEach((fn) = > fn());\n            }\n        };\n        \n        let reject = (reason) = > {\n            if (this.status === PENDING) {\n                this.status = REJECTED;\n                this.reason = reason;\n                this.onRejectedCallbacks.forEach((fn) = > fn());\n            }\n        };\n        \n        try {\n            executor(resolve, reject);\n        } catch (error) {\n            reject(error);\n        }\n    }\n    \n    then(onFulfilled, onRejected) {\n        // \u89e3\u51b3 onFufilled\uff0conRejected \u6ca1\u6709\u4f20\u503c\u7684\u95ee\u9898\n        onFulfilled = typeof onFulfilled === "function" ? onFulfilled : (v) = > v;\n        // \u56e0\u4e3a\u9519\u8bef\u7684\u503c\u8981\u8ba9\u540e\u9762\u8bbf\u95ee\u5230\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e5f\u8981\u629b\u51fa\u9519\u8bef\uff0c\u4e0d\u7136\u4f1a\u5728\u4e4b\u540e then \u7684 resolve \u4e2d\u6355\u83b7\n        onRejected = typeof onRejected === "function" ? onRejected : (err) = > {\n            throw err;\n        };\n        // \u6bcf\u6b21\u8c03\u7528 then \u90fd\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 promise\n        let promise2 = new Promise((resolve, reject) = > {\n            if (this.status === FULFILLED) {\n                //Promise/A+ 2.2.4 --- setTimeout\n                setTimeout(() = > {\n                    try {\n                        let x = onFulfilled(this.value);\n                        // x\u53ef\u80fd\u662f\u4e00\u4e2aproimise\n                        resolvePromise(promise2, x, resolve, reject);\n                    } catch (e) {\n                        reject(e);\n                    }\n                }, 0);\n            }\n        \n            if (this.status === REJECTED) {\n                //Promise/A+ 2.2.3\n                setTimeout(() = > {\n                    try {\n                        let x = onRejected(this.reason);\n                        resolvePromise(promise2, x, resolve, reject);\n                    } catch (e) {\n                        reject(e);\n                    }\n                }, 0);\n            }\n            \n            if (this.status === PENDING) {\n                this.onResolvedCallbacks.push(() = > {\n                    setTimeout(() = > {\n                        try {\n                            let x = onFulfilled(this.value);\n                            resolvePromise(promise2, x, resolve, reject);\n                        } catch (e) {\n                            reject(e);\n                        }\n                    }, 0);\n                });\n            \n                this.onRejectedCallbacks.push(() = > {\n                    setTimeout(() = > {\n                        try {\n                            let x = onRejected(this.reason);\n                            resolvePromise(promise2, x, resolve, reject);\n                        } catch (e) {\n                            reject(e);\n                        }\n                    }, 0);\n                });\n            }\n        });\n        \n        return promise2;\n    }\n}\nconst resolvePromise = (promise2, x, resolve, reject) = > {\n    // \u81ea\u5df1\u7b49\u5f85\u81ea\u5df1\u5b8c\u6210\u662f\u9519\u8bef\u7684\u5b9e\u73b0\uff0c\u7528\u4e00\u4e2a\u7c7b\u578b\u9519\u8bef\uff0c\u7ed3\u675f\u6389 promise  Promise/A+ 2.3.1\n    if (promise2 === x) {\n        return reject(\n            new TypeError("Chaining cycle detected for promise #<Promise>"));\n    }\n    // Promise/A+ 2.3.3.3.3 \u53ea\u80fd\u8c03\u7528\u4e00\u6b21\n    let called;\n    // \u540e\u7eed\u7684\u6761\u4ef6\u8981\u4e25\u683c\u5224\u65ad \u4fdd\u8bc1\u4ee3\u7801\u80fd\u548c\u522b\u7684\u5e93\u4e00\u8d77\u4f7f\u7528\n    if ((typeof x === "object" && x != null) || typeof x === "function") {\n        try {\n            // \u4e3a\u4e86\u5224\u65ad resolve \u8fc7\u7684\u5c31\u4e0d\u7528\u518d reject \u4e86\uff08\u6bd4\u5982 reject \u548c resolve \u540c\u65f6\u8c03\u7528\u7684\u65f6\u5019\uff09  Promise/A+ 2.3.3.1\n            let then = x.then;\n            if (typeof then === "function") {\n            // \u4e0d\u8981\u5199\u6210 x.then\uff0c\u76f4\u63a5 then.call \u5c31\u53ef\u4ee5\u4e86 \u56e0\u4e3a x.then \u4f1a\u518d\u6b21\u53d6\u503c\uff0cObject.defineProperty  Promise/A+ 2.3.3.3\n                then.call(\n                    x, (y) = > {\n                        // \u6839\u636e promise \u7684\u72b6\u6001\u51b3\u5b9a\u662f\u6210\u529f\u8fd8\u662f\u5931\u8d25\n                        if (called) return;\n                        called = true;\n                        // \u9012\u5f52\u89e3\u6790\u7684\u8fc7\u7a0b\uff08\u56e0\u4e3a\u53ef\u80fd promise \u4e2d\u8fd8\u6709 promise\uff09 Promise/A+ 2.3.3.3.1\n                        resolvePromise(promise2, y, resolve, reject);\n                    }, (r) = > {\n                        // \u53ea\u8981\u5931\u8d25\u5c31\u5931\u8d25 Promise/A+ 2.3.3.3.2\n                        if (called) return;\n                        called = true;\n                        reject(r);\n                    });\n            } else {\n                // \u5982\u679c x.then \u662f\u4e2a\u666e\u901a\u503c\u5c31\u76f4\u63a5\u8fd4\u56de resolve \u4f5c\u4e3a\u7ed3\u679c  Promise/A+ 2.3.3.4\n                resolve(x);\n            }\n        } catch (e) {\n            // Promise/A+ 2.3.3.2\n            if (called) return;\n            called = true;\n            reject(e);\n        }\n    } else {\n        // \u5982\u679c x \u662f\u4e2a\u666e\u901a\u503c\u5c31\u76f4\u63a5\u8fd4\u56de resolve \u4f5c\u4e3a\u7ed3\u679c  Promise/A+ 2.3.4\n        resolve(x);\n    }\n};\n')),(0,a.kt)("p",null,"Promise \u5199\u5b8c\u4e4b\u540e\u53ef\u4ee5\u901a\u8fc7 promises-aplus-tests \u8fd9\u4e2a\u5305\u5bf9\u6211\u4eec\u5199\u7684\u4ee3\u7801\u8fdb\u884c\u6d4b\u8bd5\uff0c\u770b\u662f\u5426\u7b26\u5408 A+ \u89c4\u8303\u3002\u4e0d\u8fc7\u6d4b\u8bd5\u524d\u8fd8\u5f97\u52a0\u4e00\u6bb5\u4ee3\u7801\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// promise.js\n// \u8fd9\u91cc\u662f\u4e0a\u9762\u5199\u7684 Promise \u5168\u90e8\u4ee3\u7801\nPromise.defer = Promise.deferred = function () {\n    let dfd = {}\n    dfd.promise = new Promise((resolve,reject)=>{\n        dfd.resolve = resolve;\n        dfd.reject = reject;\n    });\n    return dfd;\n}\nmodule.exports = Promise;\n")),(0,a.kt)("p",null,"\u5168\u5c40\u5b89\u88c5\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"npm i promises-aplus-tests -g\n")),(0,a.kt)("p",null,"\u7ec8\u7aef\u4e0b\u6267\u884c\u9a8c\u8bc1\u547d\u4ee4\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"promises-aplus-tests promise.js\n")),(0,a.kt)("p",null,"\u4e0a\u9762\u5199\u7684\u4ee3\u7801\u53ef\u4ee5\u987a\u5229\u901a\u8fc7\u5168\u90e8 872 \u4e2a\u6d4b\u8bd5\u7528\u4f8b\u3002"),(0,a.kt)("p",null,"\u53c2\u8003\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"BAT\u524d\u7aef\u7ecf\u5178\u9762\u8bd5\u95ee\u9898\uff1a\u53f2\u4e0a\u6700\u6700\u6700\u8be6\u7ec6\u7684\u624b\u5199Promise\u6559\u7a0b"),"[8]"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"100 \u884c\u4ee3\u7801\u5b9e\u73b0 Promises/A+ \u89c4\u8303"),"[9]")),(0,a.kt)("h3",{id:"promiseresolve"},"Promise.resolve"),(0,a.kt)("p",null,"Promsie.resolve(value) \u53ef\u4ee5\u5c06\u4efb\u4f55\u503c\u8f6c\u6210\u503c\u4e3a value \u72b6\u6001\u662f fulfilled \u7684 Promise\uff0c\u4f46\u5982\u679c\u4f20\u5165\u7684\u503c\u672c\u8eab\u662f Promise \u5219\u4f1a\u539f\u6837\u8fd4\u56de\u5b83\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Promise.resolve = function(value) {\n    // \u5982\u679c\u662f Promsie\uff0c\u5219\u76f4\u63a5\u8f93\u51fa\u5b83\n    if(value instanceof Promise){\n        return value\n    }\n    return new Promise(resolve => resolve(value))\n}\n")),(0,a.kt)("p",null,"\u53c2\u8003\uff1a",(0,a.kt)("strong",{parentName:"p"},"\u6df1\u5165\u7406\u89e3 Promise"),"[10]"),(0,a.kt)("h3",{id:"promisereject"},"Promise.reject"),(0,a.kt)("p",null,"\u548c Promise.resolve() \u7c7b\u4f3c\uff0cPromise.reject() \u4f1a\u5b9e\u4f8b\u5316\u4e00\u4e2a rejected \u72b6\u6001\u7684 Promise\u3002\u4f46\u4e0e Promise.resolve() \u4e0d\u540c\u7684\u662f\uff0c\u5982\u679c\u7ed9 Promise.reject() \u4f20\u9012\u4e00\u4e2a Promise \u5bf9\u8c61\uff0c\u5219\u8fd9\u4e2a\u5bf9\u8c61\u4f1a\u6210\u4e3a\u65b0 Promise \u7684\u503c\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Promise.reject = function(reason) {\n    return new Promise((resolve, reject) => reject(reason))\n}\n")),(0,a.kt)("h3",{id:"promiseall"},"Promise.all"),(0,a.kt)("p",null,"Promise.all \u7684\u89c4\u5219\u662f\u8fd9\u6837\u7684\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f20\u5165\u7684\u6240\u6709 Promsie \u90fd\u662f fulfilled\uff0c\u5219\u8fd4\u56de\u7531\u4ed6\u4eec\u7684\u503c\u7ec4\u6210\u7684\uff0c\u72b6\u6001\u4e3a fulfilled \u7684\u65b0 Promise\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u53ea\u8981\u6709\u4e00\u4e2a Promise \u662f rejected\uff0c\u5219\u8fd4\u56de rejected \u72b6\u6001\u7684\u65b0 Promsie\uff0c\u4e14\u5b83\u7684\u503c\u662f\u7b2c\u4e00\u4e2a rejected \u7684 Promise \u7684\u503c\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u53ea\u8981\u6709\u4e00\u4e2a Promise \u662f pending\uff0c\u5219\u8fd4\u56de\u4e00\u4e2a pending \u72b6\u6001\u7684\u65b0 Promise\uff1b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Promise.all = function(promiseArr) {\n    let index = 0, result = []\n    return new Promise((resolve, reject) => {\n        promiseArr.forEach((p, i) => {\n            Promise.resolve(p).then(val => {\n                index++\n                result[i] = val\n                if (index === promiseArr.length) {\n                    resolve(result)\n                }\n            }, err => {\n                reject(err)\n            })\n        })\n    })\n}\n")),(0,a.kt)("h3",{id:"promiserace"},"Promise.race"),(0,a.kt)("p",null,"Promise.race \u4f1a\u8fd4\u56de\u4e00\u4e2a\u7531\u6240\u6709\u53ef\u8fed\u4ee3\u5b9e\u4f8b\u4e2d\u7b2c\u4e00\u4e2a fulfilled \u6216 rejected \u7684\u5b9e\u4f8b\u5305\u88c5\u540e\u7684\u65b0\u5b9e\u4f8b\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Promise.race = function(promiseArr) {\n    return new Promise((resolve, reject) => {\n        promiseArr.forEach(p => {\n            Promise.resolve(p).then(val => {\n                resolve(val)\n            }, err => {\n                rejecte(err)\n            })\n        })\n    })\n}\n")),(0,a.kt)("h3",{id:"promiseallsettled"},"Promise.allSettled"),(0,a.kt)("p",null,"Promise.allSettled \u7684\u89c4\u5219\u662f\u8fd9\u6837\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6240\u6709 Promise \u7684\u72b6\u6001\u90fd\u53d8\u5316\u4e86\uff0c\u90a3\u4e48\u65b0\u8fd4\u56de\u4e00\u4e2a\u72b6\u6001\u662f fulfilled \u7684 Promise\uff0c\u4e14\u5b83\u7684\u503c\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u6570\u7ec4\u7684\u6bcf\u9879\u7531\u6240\u6709 Promise \u7684\u503c\u548c\u72b6\u6001\u7ec4\u6210\u7684\u5bf9\u8c61\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709\u4e00\u4e2a\u662f pending \u7684 Promise\uff0c\u5219\u8fd4\u56de\u4e00\u4e2a\u72b6\u6001\u662f pending \u7684\u65b0\u5b9e\u4f8b\uff1b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Promise.allSettled = function(promiseArr) {\n    let result = []\n        \n    return new Promise((resolve, reject) => {\n        promiseArr.forEach((p, i) => {\n            Promise.resolve(p).then(val => {\n                result.push({\n                    status: 'fulfilled',\n                    value: val\n                })\n                if (result.length === promiseArr.length) {\n                    resolve(result) \n                }\n            }, err => {\n                result.push({\n                    status: 'rejected',\n                    reason: err\n                })\n                if (result.length === promiseArr.length) {\n                    resolve(result) \n                }\n            })\n        })  \n    })   \n}\n")),(0,a.kt)("h3",{id:"promiseany"},"Promise.any"),(0,a.kt)("p",null,"Promise.any \u7684\u89c4\u5219\u662f\u8fd9\u6837\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u7a7a\u6570\u7ec4\u6216\u8005\u6240\u6709 Promise \u90fd\u662f rejected\uff0c\u5219\u8fd4\u56de\u72b6\u6001\u662f rejected \u7684\u65b0 Promsie\uff0c\u4e14\u503c\u4e3a AggregateError \u7684\u9519\u8bef\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u53ea\u8981\u6709\u4e00\u4e2a\u662f fulfilled \u72b6\u6001\u7684\uff0c\u5219\u8fd4\u56de\u7b2c\u4e00\u4e2a\u662f fulfilled \u7684\u65b0\u5b9e\u4f8b\uff1b"),(0,a.kt)("li",{parentName:"ul"},"\u5176\u4ed6\u60c5\u51b5\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a pending \u7684\u65b0\u5b9e\u4f8b\uff1b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Promise.any = function(promiseArr) {\n    let index = 0\n    return new Promise((resolve, reject) => {\n        if (promiseArr.length === 0) return \n        promiseArr.forEach((p, i) => {\n            Promise.resolve(p).then(val => {\n                resolve(val)\n                \n            }, err => {\n                index++\n                if (index === promiseArr.length) {\n                  reject(new AggregateError('All promises were rejected'))\n                }\n            })\n        })\n    })\n}\n")))}d.isMDXComponent=!0}}]);